// --- Detect Kazakh text ---

const kazakhStopwords = ["тағы", "тағыда", "әрине", "жоқ", "сондай", "осындай", "осылай", "солай", "мұндай", "бұндай", "мен", "сен", "біз", "біздер", "олар", "сіз", "сіздер", "маған", "оған", "саған", "біздің", "сіздің", "оның", "бізге", "сізге", "оларға", "біздерге", "сіздерге", "оларға", "менімен", "сенімен", "онымен", "бізбен", "сізбен", "олармен", "біздермен", "сіздермен", "менің", "сенің", "біздің", "сіздің", "оның", "біздердің", "сіздердің", "олардың", "маған", "саған", "оған", "менен", "сенен", "одан", "бізден", "сізден", "олардан", "біздерден", "сіздерден", "олардан", "айтпақшы", "сонымен", "сондықтан", "бұл", "осы", "сол", "анау", "мынау", "сонау", "осынау", "ана", "мына", "сона", "әні", "міне", "өй", "үйт", "бүйт", "біреу", "кейбіреу", "кейбір", "қайсыбір", "әрбір", "бірнеше", "бірдеме", "бірнеше", "әркім", "әрне", "әрқайсы", "әрқалай", "әлдекім", "әлдене", "әлдеқайдан", "әлденеше", "әлдеқалай", "әлдеқашан", "алдақашан", "еш", "ешкім", "ешбір", "ештеме", "дәнеңе", "ешқашан", "ешқандай", "ешқайсы", "емес", "бәрі", "барлық", "барша", "бар", "күллі", "бүкіл", "түгел", "өз", "өзім", "өзің", "өзінің", "өзіме", "өзіне", "өзімнің", "өзі", "өзге", "менде", "сенде", "онда", "менен", "сенен\tонан", "одан", "мәссаған", "бәрекелді", "әттегенай", "жаракімалла", "масқарай", "астапыралла", "япырмай", "ойпырмай", "кәне", "кәнеки", "ал", "әйда", "кәні", "міне", "әні", "сорап", "қош-қош", "пфша", "пішә", "құрау-құрау", "шәйт", "құрау", "құр", "күшім", "күшім", "мышы", "пырс", "әукім", "алақай", "паһ-паһ", "бәрекелді", "әттең", "әттеген-ай", "қап", "түге", "пішту", "шіркін", "алатау", "пай-пай", "үшін", "сайын", "сияқты", "туралы", "арқылы", "бойы", "бойымен", "шамалы", "шақты", "қаралы", "ғұрлы", "ғұрлым", "шейін", "дейін", "қарай", "таман", "салым", "тарта", "жуық", "таяу", "гөрі", "бері", "кейін", "соң", "бұрын", "бетер", "қатар", "бірге", "қоса", "сарт-сұрт", "тарс-тұрс", "арс-ұрс", "жалт-жалт", "жалт-жұлт", "қалт-қалт", "қалт-құлт", "қаңқ-қаңқ", "қаңқ-құңқ", "шаңқ-шаңқ", "шаңқ-шұңқ", "арбаң-арбаң", "бүгжең-бүгжең", "арсалаң-арсалаң", "ербелең-ербелең", "батыр-бұтыр", "далаң-далаң", "тарбаң-тарбаң", "қызараң-қызараң", "қаңғыр-күңгір", "қайқаң-құйқаң", "митың-митың", "салаң-сұлаң", "ыржың-тыржың", "бірақ", "алайда", "дегенмен", "әйтпесе", "әйткенмен", "себебі", "өйткені", "сондықтан", "үшін", "сайын", "сияқты", "туралы", "арқылы", "бойы", "бойымен", "шамалы", "шақты", "қаралы", "ғұрлы", "ғұрлым", "гөрі", "бері", "кейін", "соң", "бұрын", "бетер", "қатар", "бірге", "қоса", "шейін", "дейін", "қарай", "таман", "салым", "тарта", "жуық", "таяу", "арнайы", "осындай", "ғана", "қана", "тек", "әншейін"];

function isKazakhText(text) {
  const kazakhChars = /[ӘәІіҢңҒғҚқӨөҰұҮүҺһ]/;
  return kazakhChars.test(text);
}

function hasKazakhWords(text) {
  return kazakhStopwords.some(word => text.includes(word));
}

function pageIsKazakh() {
  return document.documentElement.lang.toLowerCase().startsWith("kk");
}

function detectKazakh(text) {
  if (pageIsKazakh()) return true;
  if (isKazakhText(text)) return true;
  if (hasKazakhWords(text)) return true;
  return false;
}